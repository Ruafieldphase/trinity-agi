<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comet Worker - Browser Control Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .status {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .status-item:last-child {
            margin-bottom: 0;
        }

        .status-label {
            color: #666;
        }

        .status-value {
            font-weight: bold;
            color: #333;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .log-container {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }

        .log-entry {
            margin-bottom: 8px;
            color: #d4d4d4;
        }

        .log-timestamp {
            color: #858585;
        }

        .log-info {
            color: #4ec9b0;
        }

        .log-success {
            color: #4ec9b0;
        }

        .log-error {
            color: #f48771;
        }

        .log-task {
            color: #dcdcaa;
        }

        .instruction {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .instruction-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 10px;
        }

        .instruction-text {
            color: #856404;
            font-size: 14px;
            line-height: 1.6;
        }

        .code-block {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 10px 0;
            overflow-x: auto;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ¤– Comet Worker</h1>
        <p class="subtitle">Copilot â†” Comet í˜‘ì—… ì‹œìŠ¤í…œ (Browser Edition)</p>

        <div class="instruction">
            <div class="instruction-title">ğŸ“‹ ì‚¬ìš© ë°©ë²• (Comet Browser AI)</div>
            <div class="instruction-text">
                1. ë¸Œë¼ìš°ì €ì˜ <strong>ê°œë°œì ë„êµ¬</strong>ë¥¼ ì—½ë‹ˆë‹¤ (F12 ë˜ëŠ” Ctrl+Shift+I)<br>
                2. <strong>Console</strong> íƒ­ìœ¼ë¡œ ì´ë™<br>
                3. ì•„ë˜ ë²„íŠ¼ ëŒ€ì‹  <strong>Consoleì— ì§ì ‘ ëª…ë ¹ì–´ ì…ë ¥</strong>:<br>
                <div class="code-block">await processOneCycle()</div>
                4. ë˜ëŠ” ìë™ ì‹¤í–‰:<br>
                <div class="code-block">await startAutoWorker()</div>
            </div>
        </div>

        <div class="status">
            <div class="status-item">
                <span class="status-label">ì‘ì—… í ê²½ë¡œ:</span>
                <span class="status-value" id="queue-path">D:\nas_backup\fdo_agi_repo\outputs\task_queue</span>
            </div>
            <div class="status-item">
                <span class="status-label">ëŒ€ê¸° ì‘ì—…:</span>
                <span class="status-value" id="pending-tasks">í™•ì¸ ì¤‘...</span>
            </div>
            <div class="status-item">
                <span class="status-label">ì²˜ë¦¬ ì™„ë£Œ:</span>
                <span class="status-value" id="completed-tasks">0</span>
            </div>
            <div class="status-item">
                <span class="status-label">ìƒíƒœ:</span>
                <span class="status-value" id="worker-status">ëŒ€ê¸° ì¤‘</span>
            </div>
        </div>

        <div class="button-group">
            <button onclick="checkTasks()">ğŸ“‹ ì‘ì—… í™•ì¸</button>
            <button onclick="processOneCycle()">â–¶ï¸ 1íšŒ ì²˜ë¦¬</button>
            <button onclick="startAutoWorker()" id="start-btn">ğŸš€ ìë™ ì‹¤í–‰ ì‹œì‘</button>
            <button onclick="stopAutoWorker()" id="stop-btn" disabled>â¹ï¸ ì¤‘ì§€</button>
        </div>

        <div class="log-container" id="log-container">
            <div class="log-entry">
                <span class="log-timestamp">[ì‹œìŠ¤í…œ]</span>
                <span class="log-info">Comet Worker ì¤€ë¹„ ì™„ë£Œ</span>
            </div>
            <div class="log-entry">
                <span class="log-timestamp">[ì•ˆë‚´]</span>
                <span class="log-info">âš ï¸ ë¸Œë¼ìš°ì €ëŠ” ë¡œì»¬ íŒŒì¼ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</span>
            </div>
            <div class="log-entry">
                <span class="log-timestamp">[í•´ê²°]</span>
                <span class="log-info">â†’ Copilotì´ HTTP API ì„œë²„ë¥¼ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤</span>
            </div>
            <div class="log-entry">
                <span class="log-timestamp">[ëŒ€ì•ˆ]</span>
                <span class="log-info">â†’ ë˜ëŠ” Cometì´ ë¡œì»¬ Python ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤</span>
            </div>
        </div>
    </div>

    <script>
        let workerInterval = null;
        let completedCount = 0;

        // ì‹¤ì œë¡œëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ë¡œì»¬ íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŒ
        // ì´ê²ƒì€ ì‹œì—°ìš© UIì…ë‹ˆë‹¤

        function log(message, type = 'info') {
            const container = document.getElementById('log-container');
            const entry = document.createElement('div');
            entry.className = 'log-entry';

            const timestamp = new Date().toLocaleTimeString('ko-KR');
            const timestampSpan = document.createElement('span');
            timestampSpan.className = 'log-timestamp';
            timestampSpan.textContent = `[${timestamp}]`;

            const messageSpan = document.createElement('span');
            messageSpan.className = `log-${type}`;
            messageSpan.textContent = ' ' + message;

            entry.appendChild(timestampSpan);
            entry.appendChild(messageSpan);
            container.appendChild(entry);

            // ìë™ ìŠ¤í¬ë¡¤
            container.scrollTop = container.scrollHeight;
        }

        async function checkTasks() {
            log('ì‘ì—… í™•ì¸ ì¤‘...', 'info');

            // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ í•„ìš”
            log('âš ï¸ ë¸Œë¼ìš°ì €ëŠ” ë¡œì»¬ íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
            log('â†’ Copilotì—ê²Œ HTTP API ì„œë²„ ì‹¤í–‰ì„ ìš”ì²­í•˜ì„¸ìš”', 'info');

            document.getElementById('pending-tasks').textContent = 'í™•ì¸ ë¶ˆê°€ (API í•„ìš”)';
        }

        async function processOneCycle() {
            log('ì‘ì—… ì²˜ë¦¬ ì‹œë„...', 'info');

            // ì‹¤ì œ êµ¬í˜„ í•„ìš”
            log('âš ï¸ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œëŠ” íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼ ë¶ˆê°€', 'error');
            log('ğŸ’¡ í•´ê²° ë°©ë²•:', 'info');
            log('  1. Copilotì´ HTTP API ì„œë²„ ì‹¤í–‰', 'info');
            log('  2. fetch() APIë¡œ ì„œë²„ì— ìš”ì²­', 'info');
            log('  3. ì„œë²„ê°€ íŒŒì¼ ì‹œìŠ¤í…œ ëŒ€ì‹  ì²˜ë¦¬', 'info');
        }

        async function startAutoWorker() {
            log('ìë™ ì‹¤í–‰ ì‹œì‘...', 'success');
            document.getElementById('start-btn').disabled = true;
            document.getElementById('stop-btn').disabled = false;
            document.getElementById('worker-status').textContent = 'ì‹¤í–‰ ì¤‘';

            log('âš ï¸ í˜„ì¬ëŠ” ì‹œì—° ëª¨ë“œì…ë‹ˆë‹¤', 'info');
            log('â†’ HTTP APIê°€ í•„ìš”í•©ë‹ˆë‹¤', 'info');

            // ì‹œë®¬ë ˆì´ì…˜
            workerInterval = setInterval(() => {
                log('ğŸ” ì‘ì—… í™•ì¸ ì¤‘... (ì‹œë®¬ë ˆì´ì…˜)', 'info');
            }, 5000);
        }

        function stopAutoWorker() {
            if (workerInterval) {
                clearInterval(workerInterval);
                workerInterval = null;
            }

            log('ìë™ ì‹¤í–‰ ì¤‘ì§€', 'info');
            document.getElementById('start-btn').disabled = false;
            document.getElementById('stop-btn').disabled = true;
            document.getElementById('worker-status').textContent = 'ëŒ€ê¸° ì¤‘';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', () => {
            log('ğŸŒ Comet Worker UI ë¡œë“œ ì™„ë£Œ', 'success');
            log('âš ï¸ ì¤‘ìš”: ì´ í˜ì´ì§€ë§Œìœ¼ë¡œëŠ” ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤', 'error');
            log('', 'info');
            log('ğŸ“‹ í•„ìš”í•œ ê²ƒ:', 'info');
            log('  1. Copilotì´ HTTP API ì„œë²„ ì‹¤í–‰', 'info');
            log('  2. API ì—”ë“œí¬ì¸íŠ¸:', 'info');
            log('     GET /api/tasks - ëŒ€ê¸° ì‘ì—… ëª©ë¡', 'info');
            log('     POST /api/tasks/:id/complete - ì‘ì—… ì™„ë£Œ', 'info');
            log('', 'info');
            log('ğŸ’¡ ë˜ëŠ” Cometì´ ë¡œì»¬ Python ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ë©´:', 'info');
            log('  â†’ comet_simple_worker.py ì‹¤í–‰', 'info');
        });
    </script>
</body>

</html>