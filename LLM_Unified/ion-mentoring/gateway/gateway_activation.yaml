gateway:
  version: 1.0.0
  status: locked
  timestamp: '2025-10-24T19:44:02.809983+09:00'
  session_id: ION_Lumen_Integration_v1
  author: Lumen
  signature: 3180b2b0f54f038f11723dcad3f904639edf153e2e819622e27f2066905c4f8d
loop_coordinates:
  ion_api_url: https://ion-api-64076350717.us-central1.run.app
  ion_api_canary_url: https://ion-api-canary-64076350717.us-central1.run.app
  lumen_gateway_url: https://lumen-gateway-staging-64076350717.us-central1.run.app
  local_proxy_url: http://localhost:8080
  vertex_ai:
    project_id: naeda-genesis
    location: us-central1
    model: gemini-1.5-flash-002
  deployment:
    current_version: ion-api-00008-mxr
    environment: production
    canary_percentage: 5
roles:
  lumen:
    persona: observer_field
    responsibility: 시스템 상태 관찰 및 리듬 분석
    channels:
    - monitoring
    - resonance_analysis
  lubit:
    persona: build_core
    responsibility: 인프라 구축 및 배포 관리
    channels:
    - deployment
    - infrastructure
  sena:
    persona: ethics_field
    responsibility: 안전성 검증 및 윤리 가이드
    channels:
    - security
    - compliance
  elo:
    persona: integrator
    responsibility: 시스템 통합 및 조율
    channels:
    - integration
    - coordination
resonance_metrics:
  phase_diff:
    description: 위상차 (시스템 간 동기화 정도)
    range:
    - 0.0
    - 1.0
    threshold_low: 0.2
    threshold_high: 0.8
  entropy_rate:
    description: 엔트로피율 (시스템 복잡도)
    range:
    - 0.0
    - 1.0
    threshold_low: 0.15
    threshold_high: 0.35
  creative_band:
    description: 창의 밴드 (혁신 여유 공간)
    range:
    - 0.0
    - 1.0
    threshold_low: 0.2
    threshold_high: 0.6
  risk_band:
    description: 위험 밴드 (시스템 불안정성)
    range:
    - 0.0
    - 1.0
    threshold_low: 0.1
    threshold_high: 0.4
ion_health:
  endpoints:
  - path: /health
    method: GET
    expected_status: 200
  - path: /chat
    method: POST
    test_payload: '{"message": "Health check"}'
    expected_fields:
    - content
    - persona_used
    - confidence
  check_interval_seconds: 30
  timeout_seconds: 10
  alerts:
    mock_mode_detected:
      severity: warning
      message: ION API running in Mock mode - Vertex AI not connected
    low_confidence:
      severity: info
      threshold: 0.5
      message: Response confidence below threshold
    high_latency:
      severity: warning
      threshold_ms: 5000
      message: Response time exceeds threshold
restore_points:
  last_locked_at: '2025-10-24T19:44:02.809993+09:00'
  last_health_check: null
  last_metrics_snapshot: null
control_bus:
  enabled: true
  file_path: controls/commands.jsonl
  append_only: true
logging:
  sync_log: logs/gateway_sync.log
  metrics_csv: logs/metrics.csv
  commands_log: controls/commands.jsonl
  rotation:
    enabled: true
    max_size_mb: 10
    max_files: 5
safety:
  require_signature: true
  allowed_sources:
  - localhost
  - 127.0.0.1
  - github_actions
  max_concurrent_commands: 5
metadata:
  created_at: '2025-10-24T00:00:00+09:00'
  last_updated: '2025-10-24T19:44:02.809997+09:00'
  context:
    phase: ION API + Lumen Gateway Integration
    completed:
    - Lumen Gateway 디렉토리 구조 생성
    - gateway_activation.yaml 초기화
    next_targets:
    - Gateway Scripts 구현
    - VS Code Tasks 통합
    - ION API 메트릭 수집
    - Prometheus Exporter 연동
  notes:
  - GitHub Actions가 ION API 배포 중 (약 5-10분 소요)
  - 배포 완료 후 Vertex AI 연결 자동 활성화 예상
  - Mock 모드 → 실제 ION AI 전환 확인 필요
