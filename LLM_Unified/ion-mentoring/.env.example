# ============================================================================
# ION Mentoring - 환경 변수 템플릿
# 사용법: .env.example을 .env로 복사하고 필요한 값을 입력하세요
# 절대로 민감한 정보를 커밋하지 마세요!
# ============================================================================

# 환경 설정
ENVIRONMENT=development  # development, staging, production
DEPLOYMENT_VERSION=LEGACY  # LEGACY, CANARY
CONFIG_PATH=config/dev.yaml

# ============================================================================
# 애플리케이션 설정
# ============================================================================
APP_NAME=내다AI Ion Mentoring API
APP_VERSION=0.1.0
DEBUG=true
LOG_LEVEL=INFO
PHASE4_ENABLED=false
CANARY_TRAFFIC_PERCENTAGE=5  # 0~100 (legacy service는 0 권장)

# ============================================================================
# 서버 설정
# ============================================================================
HOST=0.0.0.0
PORT=8000
RELOAD=true  # 개발 환경에서만 true

# ============================================================================
# Google Cloud Platform 설정
# ============================================================================
# GCP 프로젝트 설정 (필수)
GCP_PROJECT_ID=your-gcp-project-id
GCP_LOCATION=us-central1

# Vertex AI 설정
VERTEX_PROJECT_ID=your-vertex-project-id
VERTEX_LOCATION=us-central1
VERTEX_MODEL=gemini-1.5-flash-002

# Google Cloud Logging (프로덕션)
USE_CLOUD_LOGGING=false
GCP_CREDENTIALS_PATH=  # JSON 파일 경로 (기본값: GOOGLE_APPLICATION_CREDENTIALS 환경 변수 사용)

# ============================================================================
# 데이터베이스 설정
# ============================================================================
DATABASE_TYPE=json  # json, sqlite, postgresql
DATABASE_PATH=data/

# PostgreSQL (프로덕션)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=ion_mentoring
# POSTGRES_USER=ion_user
# POSTGRES_PASSWORD=your-secure-password
# POSTGRES_POOL_SIZE=20

# ============================================================================
# Redis 설정 (캐싱, Rate Limiting, 메모리)
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=  # 필요시 입력

# ============================================================================
# RAG (Retrieval-Augmented Generation) 설정
# ============================================================================
RAG_ENABLED=true
RAG_TYPE=chromadb  # chromadb, faiss, pinecone

# Chromadb (개발/테스트)
CHROMADB_PATH=data/chromadb

# Pinecone (프로덕션)
# PINECONE_API_KEY=your-pinecone-api-key
# PINECONE_INDEX_NAME=ion-embeddings
# PINECONE_ENVIRONMENT=us-west1-gcp

# 임베딩 모델
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# ============================================================================
# Rate Limiting 설정
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_CALLS=10  # 분당 요청 제한
RATE_LIMIT_PERIOD=60  # 초

# ============================================================================
# CORS 설정
# ============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:8080

# ============================================================================
# 인증 및 보안 설정
# ============================================================================
JWT_ENABLED=false
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRY_HOURS=24

API_KEY_ENABLED=false
# API_KEY=your-api-key

# HTTPS 설정 (프로덕션)
HTTPS_ONLY=false
HSTS_ENABLED=false
HSTS_MAX_AGE=31536000

# ============================================================================
# 백엔드 LLM 설정
# ============================================================================
BACKEND_TYPE=mock  # mock, vertex-ai, openai, anthropic
BACKEND_TIMEOUT=30
BACKEND_MAX_RETRIES=3

# OpenAI (선택)
# OPENAI_API_KEY=your-openai-api-key
# OPENAI_MODEL=gpt-4-turbo-preview

# Anthropic (선택)
# ANTHROPIC_API_KEY=your-anthropic-api-key
# ANTHROPIC_MODEL=claude-3-opus

# ============================================================================
# 모니터링 및 추적 설정
# ============================================================================
MONITORING_ENABLED=true
METRICS_PORT=9090
TRACING_ENABLED=false

# Jaeger 분산 추적 (프로덕션)
JAEGER_ENDPOINT=localhost:6831
JAEGER_SERVICE_NAME=ion-mentoring

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# ============================================================================
# 캐싱 설정
# ============================================================================
CACHE_ENABLED=true
CACHE_TYPE=memory  # memory, redis
CACHE_TTL=300  # 초
CACHE_MAX_SIZE=1000

# ============================================================================
# 메모리 저장소 설정
# ============================================================================
MEMORY_TYPE=local  # local, redis
MEMORY_MAX_SIZE=1000
MEMORY_TTL=3600
MEMORY_PERSISTENCE=true
MEMORY_PATH=data/memory/

# ============================================================================
# 기능 플래그
# ============================================================================
PERSONA_ROUTING_ENABLED=true
MEMORY_PERSISTENCE_ENABLED=true
RAG_ENABLED=true
ANALYTICS_ENABLED=true
FALLBACK_TO_NANA=true

# Lumen 게이트웨이 통합 (가드레일)
LUMEN_GATE_ENABLED=false
# 기본 게이트웨이 엔드포인트 (활성화 시 필수)
# LUMEN_GATEWAY_URL=http://localhost:8081/chat
# 헬스/스모크 체크 타임아웃(ms)
LUMEN_HEALTH_TIMEOUT_MS=15000

# ============================================================================
# 로깅 설정
# ============================================================================
LOG_FORMAT=json  # json, text
LOG_FILE_PATH=logs/app.log
LOG_FILE_MAX_SIZE_MB=100
LOG_FILE_BACKUP_COUNT=5

# ============================================================================
# 로드 테스팅 설정 (locust)
# ============================================================================
LOAD_TEST_HOST=https://localhost:8080
LOAD_TEST_USERS=10
LOAD_TEST_SPAWN_RATE=1
LOAD_TEST_RUN_TIME=2m

# ============================================================================
# 개발 전용 설정
# ============================================================================
MOCK_BACKEND_TYPE=echo  # echo, delay, random
MOCK_DELAY_MS=100
IPYTHON_ENABLED=true

# ============================================================================
# 프로덕션 전용 설정
# ============================================================================
SENTRY_DSN=  # 에러 추적
DATADOG_API_KEY=  # Datadog 모니터링
SLACK_WEBHOOK_URL=  # Slack 알림

# ============================================================================
# 기타 설정
# ============================================================================
TIMEZONE=Asia/Seoul
LOCALE=ko_KR.UTF-8
