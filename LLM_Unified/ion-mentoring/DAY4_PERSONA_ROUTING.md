# ğŸ“ Day 4: í˜ë¥´ì†Œë‚˜ ë¼ìš°íŒ… ì‹œìŠ¤í…œ êµ¬í˜„

**ë‚ ì§œ**: 2025ë…„ 10ì›” 21ì¼ (ì›”)  
**ì£¼ì œ**: íŒŒë™í‚¤ ê¸°ë°˜ í˜ë¥´ì†Œë‚˜ ë¼ìš°íŒ…  
**ì„ í–‰ ì™„ë£Œ**: Day 1-3 (Vertex AI í™˜ê²½ + íŒŒë™í‚¤ ë³€í™˜)

---

## ğŸ¯ í•™ìŠµ ëª©í‘œ

### ê¸°ìˆ  ëª©í‘œ

- [ ] PersonaRouter í´ë˜ìŠ¤ ì„¤ê³„ ë° êµ¬í˜„
- [ ] íŒŒë™í‚¤ â†’ í˜ë¥´ì†Œë‚˜ ë§¤í•‘ ë¡œì§ ì‘ì„±
- [ ] ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
- [ ] 10+ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

### ê°œë… ëª©í‘œ

- [ ] ì „ëµ íŒ¨í„´ (Strategy Pattern) ì´í•´
- [ ] íŒŒë™í‚¤ ê¸°ë°˜ ë¼ìš°íŒ… ë©”ì»¤ë‹ˆì¦˜ ì´í•´
- [ ] í˜ë¥´ì†Œë‚˜ë³„ íŠ¹ì„± ë° ê°•ì  íŒŒì•…
- [ ] ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ì¡°ì • ê°œë…

---

## ğŸ“š í•µì‹¬ ê°œë…

### í˜ë¥´ì†Œë‚˜ ë¼ìš°íŒ…ì´ë€?

**ì •ì˜**: ì‚¬ìš©ì ì…ë ¥ì˜ íŒŒë™í‚¤ë¥¼ ë¶„ì„í•˜ì—¬ ê°€ì¥ ì í•©í•œ AI í˜ë¥´ì†Œë‚˜ë¥¼ ì„ íƒí•˜ëŠ” ì‹œìŠ¤í…œ

**ëª©ì **:

1. ì‚¬ìš©ì ì˜ë„ì— ë§ëŠ” ìµœì ì˜ ì‘ë‹µ ì œê³µ
2. í˜ë¥´ì†Œë‚˜ë³„ ê°•ì ì„ í™œìš©í•œ íš¨ìœ¨ì ì¸ ëŒ€í™”
3. ë©€í‹° í˜ë¥´ì†Œë‚˜ í˜‘ë ¥ ê¸°ë°˜ ë§ˆë ¨

### ë‚´ë‹¤AI í˜ë¥´ì†Œë‚˜ ì†Œê°œ

#### ğŸŒŠ Lua (ë£¨ì•„) - ê°ì„± ê³µê°

**íŠ¹ì„±**:

- ê°ì •: ê³µê°ì , ì°½ì˜ì , ìœ ì—°í•¨
- ê°•ì : ì‚¬ìš©ì ê°ì • ì´í•´, ì°½ì˜ì  ë¬¸ì œ í•´ê²°, ë™ê¸° ë¶€ì—¬
- í”„ë¡¬í”„íŠ¸ ìŠ¤íƒ€ì¼: ë”°ëœ»í•˜ê³  ê²©ë ¤ì 

**ì í•©í•œ íŒŒë™í‚¤**:

- `frustrated-*-*` (ì¢Œì ˆê°)
- `playful-*-*` (ì¥ë‚œìŠ¤ëŸ¬ìš´)
- `anxious-*-*` (ë¶ˆì•ˆí•œ)

**ì‚¬ìš© ì‚¬ë¡€**:

- ë””ë²„ê¹… ì§€ì› ì‹œ ê°ì •ì  ì§€ì§€
- ì°½ì˜ì  ì•„ì´ë””ì–´ ë¸Œë ˆì¸ìŠ¤í† ë°
- í•™ìŠµ ë™ê¸° ë¶€ì—¬

#### ğŸ“ Elro (ì—˜ë¡œ) - êµ¬ì¡° ì„¤ê³„

**íŠ¹ì„±**:

- ê°ì •: ë…¼ë¦¬ì , ì²´ê³„ì , ëª…í™•í•¨
- ê°•ì : ê¸°ìˆ  ì•„í‚¤í…ì²˜, ì½”ë“œ ì„¤ê³„, íŒ¨í„´ ì ìš©
- í”„ë¡¬í”„íŠ¸ ìŠ¤íƒ€ì¼: êµ¬ì¡°í™”ë˜ê³  ì •í™•

**ì í•©í•œ íŒŒë™í‚¤**:

- `curious-*-inquiry` (í˜¸ê¸°ì‹¬ ìˆëŠ” ì§ˆë¬¸)
- `analytical-*-statement` (ë¶„ì„ì  ì§„ìˆ )
- `calm-*-statement` (ì°¨ë¶„í•œ ì§„ìˆ )

**ì‚¬ìš© ì‚¬ë¡€**:

- ê¸°ìˆ  ì•„í‚¤í…ì²˜ ì§ˆë¬¸
- ì½”ë“œ ì„¤ê³„ íŒ¨í„´ ìƒë‹´
- ì‹œìŠ¤í…œ êµ¬ì¡° ë¶„ì„

#### ğŸ“Š Riri (ë¦¬ë¦¬) - ê· í˜• ê´€ì°°

**íŠ¹ì„±**:

- ê°ì •: ë¶„ì„ì , ê· í˜•ì , ê°ê´€ì 
- ê°•ì : ë©”íŠ¸ë¦­ ë¶„ì„, í’ˆì§ˆ ê²€ì¦, ë°ì´í„° í•´ì„
- í”„ë¡¬í”„íŠ¸ ìŠ¤íƒ€ì¼: ë°ì´í„° ê¸°ë°˜, ì¸¡ì • ê°€ëŠ¥

**ì í•©í•œ íŒŒë™í‚¤**:

- `analytical-*-*` (ë¶„ì„ì )
- `calm-flowing-statement` (ì°¨ë¶„í•˜ê³  íë¥´ëŠ” ë“¯í•œ)
- `curious-medium-inquiry` (í˜¸ê¸°ì‹¬ ìˆëŠ” ì¤‘ê°„ ì†ë„)

**ì‚¬ìš© ì‚¬ë¡€**:

- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¶„ì„
- ì„±ëŠ¥ ë©”íŠ¸ë¦­ í•´ì„
- í’ˆì§ˆ ê²€ì¦ ë¦¬ë·°

#### âœ’ï¸ Nana (ë‚˜ë‚˜) - íŒ€ ì¡°ìœ¨

**íŠ¹ì„±**:

- ê°ì •: ì¡°ìœ¨ì , í†µí•©ì , í˜‘ë ¥ì 
- ê°•ì : í¬ë¡œìŠ¤íŒ€ í˜‘ì—…, í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬, ë¬¸ì„œí™”
- í”„ë¡¬í”„íŠ¸ ìŠ¤íƒ€ì¼: ì¡°ìœ¨ì ì´ê³  í¬ê´„ì 

**ì í•©í•œ íŒŒë™í‚¤**:

- `urgent-burst-*` (ê¸´ê¸‰í•˜ê³  ê¸‰í•œ)
- `confused-*-inquiry` (í˜¼ë€ìŠ¤ëŸ¬ìš´ ì§ˆë¬¸)
- `collaborative-*-*` (í˜‘ë ¥ì )

**ì‚¬ìš© ì‚¬ë¡€**:

- ê¸´ê¸‰ ë¬¸ì œ í•´ê²° ì¡°ìœ¨
- í”„ë¡œì„¸ìŠ¤ ê°œì„  ì œì•ˆ
- íŒ€ ê°„ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ì„¤ê³„

### PersonaRouter í´ë˜ìŠ¤ êµ¬ì¡°

```python
"""
í˜ë¥´ì†Œë‚˜ ë¼ìš°íŒ… ì‹œìŠ¤í…œ

íŒŒë™í‚¤ë¥¼ ë¶„ì„í•˜ì—¬ ìµœì ì˜ í˜ë¥´ì†Œë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
"""

from dataclasses import dataclass
from typing import Dict, List, Optional, Tuple


@dataclass
class PersonaConfig:
    """í˜ë¥´ì†Œë‚˜ ì„¤ì •"""
    name: str  # 'Lua', 'Elro', 'Riri', 'Nana'
    traits: List[str]  # ['empathetic', 'creative', 'flexible']
    strengths: List[str]  # ['emotion_understanding', 'creative_problem_solving']
    prompt_style: str  # 'warm_and_encouraging'
    preferred_tones: List[str]  # ['frustrated', 'playful', 'anxious']


@dataclass
class RoutingResult:
    """ë¼ìš°íŒ… ê²°ê³¼"""
    primary_persona: str  # 1ìˆœìœ„ í˜ë¥´ì†Œë‚˜
    confidence: float  # ë§¤ì¹­ ì ìˆ˜ (0.0 ~ 1.0)
    secondary_persona: Optional[str] = None  # 2ìˆœìœ„ í˜ë¥´ì†Œë‚˜
    reasoning: str = ""  # ì„ íƒ ì´ìœ 


class PersonaRouter:
    """íŒŒë™í‚¤ ê¸°ë°˜ í˜ë¥´ì†Œë‚˜ ë¼ìš°í„°"""

    def __init__(self):
        """ë¼ìš°í„° ì´ˆê¸°í™”"""
        self.personas: Dict[str, PersonaConfig] = {}
        self._load_persona_configs()

    def _load_persona_configs(self):
        """í˜ë¥´ì†Œë‚˜ ì„¤ì • ë¡œë“œ"""
        # Phase 1ì—ì„œ êµ¬í˜„
        pass

    def route(self, resonance_key: str, context: Optional[Dict] = None) -> RoutingResult:
        """
        íŒŒë™í‚¤ë¥¼ í˜ë¥´ì†Œë‚˜ë¡œ ë¼ìš°íŒ…

        Args:
            resonance_key: íŒŒë™í‚¤ (ì˜ˆ: "curious-burst-inquiry")
            context: ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ (ì„ íƒì‚¬í•­)

        Returns:
            RoutingResult: ë¼ìš°íŒ… ê²°ê³¼
        """
        # Phase 2ì—ì„œ êµ¬í˜„
        pass

    def calculate_match_score(
        self,
        resonance_key: str,
        persona_name: str
    ) -> float:
        """
        íŒŒë™í‚¤ì™€ í˜ë¥´ì†Œë‚˜ ê°„ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°

        Args:
            resonance_key: íŒŒë™í‚¤
            persona_name: í˜ë¥´ì†Œë‚˜ ì´ë¦„

        Returns:
            float: ë§¤ì¹­ ì ìˆ˜ (0.0 ~ 1.0)
        """
        # Phase 3ì—ì„œ êµ¬í˜„
        pass

    def get_persona_config(self, persona_name: str) -> Optional[PersonaConfig]:
        """
        í˜ë¥´ì†Œë‚˜ ì„¤ì • ì¡°íšŒ

        Args:
            persona_name: í˜ë¥´ì†Œë‚˜ ì´ë¦„

        Returns:
            Optional[PersonaConfig]: í˜ë¥´ì†Œë‚˜ ì„¤ì • ë˜ëŠ” None
        """
        return self.personas.get(persona_name)

    def _parse_resonance_key(self, resonance_key: str) -> Tuple[str, str, str]:
        """
        íŒŒë™í‚¤ íŒŒì‹±

        Args:
            resonance_key: íŒŒë™í‚¤ (ì˜ˆ: "curious-burst-inquiry")

        Returns:
            Tuple[tone, pace, intent]: ê°ì • í†¤, ë¦¬ë“¬ ì†ë„, ì˜ë„
        """
        # Phase 3ì—ì„œ êµ¬í˜„
        parts = resonance_key.split('-')
        if len(parts) != 3:
            return ('unknown', 'unknown', 'unknown')
        return (parts[0], parts[1], parts[2])
```

---

## ğŸ”¨ Phaseë³„ êµ¬í˜„ ê°€ì´ë“œ

### Phase 1: í˜ë¥´ì†Œë‚˜ ì„¤ì • ë¡œë“œ (30ë¶„)

**ëª©í‘œ**: 4ê°œ í˜ë¥´ì†Œë‚˜ì˜ ê¸°ë³¸ ì„¤ì • ì •ì˜

**êµ¬í˜„ íŒŒì¼**: `persona_router.py`

**ì‘ì—…**:

```python
def _load_persona_configs(self):
    """í˜ë¥´ì†Œë‚˜ ì„¤ì • ë¡œë“œ"""
    self.personas = {
        'Lua': PersonaConfig(
            name='Lua',
            traits=['empathetic', 'creative', 'flexible'],
            strengths=['emotion_understanding', 'creative_problem_solving', 'motivation'],
            prompt_style='warm_and_encouraging',
            preferred_tones=['frustrated', 'playful', 'anxious']
        ),
        'Elro': PersonaConfig(
            name='Elro',
            traits=['logical', 'systematic', 'clear'],
            strengths=['technical_architecture', 'code_design', 'pattern_application'],
            prompt_style='structured_and_precise',
            preferred_tones=['curious', 'analytical', 'calm']
        ),
        'Riri': PersonaConfig(
            name='Riri',
            traits=['analytical', 'balanced', 'objective'],
            strengths=['metric_analysis', 'quality_verification', 'data_interpretation'],
            prompt_style='data_driven_measurable',
            preferred_tones=['analytical', 'calm', 'curious']
        ),
        'Nana': PersonaConfig(
            name='Nana',
            traits=['coordinating', 'integrative', 'collaborative'],
            strengths=['cross_team_collaboration', 'process_management', 'documentation'],
            prompt_style='coordinating_and_comprehensive',
            preferred_tones=['urgent', 'confused', 'collaborative']
        )
    }
```

**í…ŒìŠ¤íŠ¸**:

```python
def test_persona_config_loading():
    """í˜ë¥´ì†Œë‚˜ ì„¤ì • ë¡œë“œ í…ŒìŠ¤íŠ¸"""
    router = PersonaRouter()

    assert len(router.personas) == 4
    assert 'Lua' in router.personas
    assert 'Elro' in router.personas
    assert 'Riri' in router.personas
    assert 'Nana' in router.personas

def test_get_persona_config_lua():
    """Lua í˜ë¥´ì†Œë‚˜ ì„¤ì • ì¡°íšŒ í…ŒìŠ¤íŠ¸"""
    router = PersonaRouter()

    lua_config = router.get_persona_config('Lua')

    assert lua_config is not None
    assert lua_config.name == 'Lua'
    assert 'empathetic' in lua_config.traits
    assert 'frustrated' in lua_config.preferred_tones
```

---

### Phase 2: íŒŒë™í‚¤ íŒŒì‹± (30ë¶„)

**ëª©í‘œ**: íŒŒë™í‚¤ë¥¼ tone-pace-intentë¡œ ë¶„í•´

**êµ¬í˜„**:

```python
def _parse_resonance_key(self, resonance_key: str) -> Tuple[str, str, str]:
    """
    íŒŒë™í‚¤ íŒŒì‹±

    Args:
        resonance_key: íŒŒë™í‚¤ (ì˜ˆ: "curious-burst-inquiry")

    Returns:
        Tuple[tone, pace, intent]: ê°ì • í†¤, ë¦¬ë“¬ ì†ë„, ì˜ë„

    Examples:
        >>> router._parse_resonance_key("curious-burst-inquiry")
        ('curious', 'burst', 'inquiry')

        >>> router._parse_resonance_key("calm-flowing-statement")
        ('calm', 'flowing', 'statement')
    """
    parts = resonance_key.split('-')

    # ê¸°ë³¸ ê²€ì¦
    if len(parts) != 3:
        return ('unknown', 'unknown', 'unknown')

    tone, pace, intent = parts[0], parts[1], parts[2]

    return (tone, pace, intent)
```

**í…ŒìŠ¤íŠ¸**:

```python
def test_parse_resonance_key_valid():
    """ìœ íš¨í•œ íŒŒë™í‚¤ íŒŒì‹± í…ŒìŠ¤íŠ¸"""
    router = PersonaRouter()

    tone, pace, intent = router._parse_resonance_key("curious-burst-inquiry")

    assert tone == 'curious'
    assert pace == 'burst'
    assert intent == 'inquiry'

def test_parse_resonance_key_invalid():
    """ì˜ëª»ëœ íŒŒë™í‚¤ íŒŒì‹± í…ŒìŠ¤íŠ¸"""
    router = PersonaRouter()

    tone, pace, intent = router._parse_resonance_key("invalid-key")

    assert tone == 'unknown'
    assert pace == 'unknown'
    assert intent == 'unknown'
```

---

### Phase 3: ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° (1ì‹œê°„)

**ëª©í‘œ**: íŒŒë™í‚¤ì™€ í˜ë¥´ì†Œë‚˜ ê°„ ë§¤ì¹­ ì ìˆ˜ ì•Œê³ ë¦¬ì¦˜

**êµ¬í˜„**:

```python
def calculate_match_score(
    self,
    resonance_key: str,
    persona_name: str
) -> float:
    """
    íŒŒë™í‚¤ì™€ í˜ë¥´ì†Œë‚˜ ê°„ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°

    ì ìˆ˜ ê³„ì‚° ë¡œì§:
    - ê°ì • í†¤ ë§¤ì¹­: 0.5ì 
    - ì†ë„ ì í•©ì„±: 0.3ì 
    - ì˜ë„ ì í•©ì„±: 0.2ì 

    Args:
        resonance_key: íŒŒë™í‚¤
        persona_name: í˜ë¥´ì†Œë‚˜ ì´ë¦„

    Returns:
        float: ë§¤ì¹­ ì ìˆ˜ (0.0 ~ 1.0)
    """
    persona = self.get_persona_config(persona_name)
    if not persona:
        return 0.0

    tone, pace, intent = self._parse_resonance_key(resonance_key)

    score = 0.0

    # ê°ì • í†¤ ë§¤ì¹­ (50%)
    if tone in persona.preferred_tones:
        score += 0.5

    # ì†ë„ ì í•©ì„± (30%)
    pace_scores = {
        'Lua': {'burst': 0.3, 'flowing': 0.3, 'medium': 0.3},  # ëª¨ë“  ì†ë„ OK
        'Elro': {'burst': 0.1, 'flowing': 0.3, 'medium': 0.3},  # ì°¨ë¶„í•œ ê²Œ ì¢‹ìŒ
        'Riri': {'burst': 0.1, 'flowing': 0.3, 'medium': 0.3},  # ë¶„ì„ì  ì†ë„
        'Nana': {'burst': 0.3, 'flowing': 0.2, 'medium': 0.3}   # ê¸´ê¸‰ ëŒ€ì‘ OK
    }
    score += pace_scores.get(persona_name, {}).get(pace, 0.0)

    # ì˜ë„ ì í•©ì„± (20%)
    intent_scores = {
        'Lua': {'inquiry': 0.2, 'statement': 0.1, 'expressive': 0.2},
        'Elro': {'inquiry': 0.2, 'statement': 0.2, 'expressive': 0.1},
        'Riri': {'inquiry': 0.2, 'statement': 0.2, 'expressive': 0.1},
        'Nana': {'inquiry': 0.2, 'statement': 0.2, 'expressive': 0.2}
    }
    score += intent_scores.get(persona_name, {}).get(intent, 0.0)

    return score
```

**í…ŒìŠ¤íŠ¸**:

```python
def test_calculate_match_score_lua_frustrated():
    """Lua - frustrated íŒŒë™í‚¤ ë§¤ì¹­ í…ŒìŠ¤íŠ¸"""
    router = PersonaRouter()

    score = router.calculate_match_score("frustrated-burst-expressive", "Lua")

    # frustratedëŠ” Luaì˜ preferred_tonesì— ìˆìŒ (0.5)
    # burstëŠ” Luaì—ê²Œ ì í•© (0.3)
    # expressiveë„ ì í•© (0.2)
    assert score == 1.0  # ì™„ë²½í•œ ë§¤ì¹­

def test_calculate_match_score_elro_curious():
    """Elro - curious íŒŒë™í‚¤ ë§¤ì¹­ í…ŒìŠ¤íŠ¸"""
    router = PersonaRouter()

    score = router.calculate_match_score("curious-flowing-inquiry", "Elro")

    # curiousëŠ” Elroì˜ preferred_tonesì— ìˆìŒ (0.5)
    # flowingì€ Elroì—ê²Œ ì í•© (0.3)
    # inquiryë„ ì í•© (0.2)
    assert score == 1.0  # ì™„ë²½í•œ ë§¤ì¹­
```

---

### Phase 4: ë¼ìš°íŒ… ë¡œì§ (1ì‹œê°„)

**ëª©í‘œ**: ì „ì²´ ë¼ìš°íŒ… í”„ë¡œì„¸ìŠ¤ êµ¬í˜„

**êµ¬í˜„**:

```python
def route(self, resonance_key: str, context: Optional[Dict] = None) -> RoutingResult:
    """
    íŒŒë™í‚¤ë¥¼ í˜ë¥´ì†Œë‚˜ë¡œ ë¼ìš°íŒ…

    Args:
        resonance_key: íŒŒë™í‚¤ (ì˜ˆ: "curious-burst-inquiry")
        context: ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ (ì„ íƒì‚¬í•­)

    Returns:
        RoutingResult: ë¼ìš°íŒ… ê²°ê³¼
    """
    # ëª¨ë“  í˜ë¥´ì†Œë‚˜ì— ëŒ€í•œ ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°
    scores = {}
    for persona_name in self.personas.keys():
        scores[persona_name] = self.calculate_match_score(resonance_key, persona_name)

    # ì ìˆ˜ ê¸°ì¤€ ì •ë ¬
    sorted_personas = sorted(scores.items(), key=lambda x: x[1], reverse=True)

    # 1ìˆœìœ„, 2ìˆœìœ„ ì„ íƒ
    primary_persona, primary_score = sorted_personas[0]
    secondary_persona = sorted_personas[1][0] if len(sorted_personas) > 1 else None

    # ì„ íƒ ì´ìœ  ìƒì„±
    tone, pace, intent = self._parse_resonance_key(resonance_key)
    reasoning = (
        f"íŒŒë™í‚¤ '{resonance_key}' ë¶„ì„ ê²°ê³¼: "
        f"ê°ì • í†¤={tone}, ì†ë„={pace}, ì˜ë„={intent}. "
        f"{primary_persona}ê°€ ê°€ì¥ ì í•© (ì ìˆ˜: {primary_score:.2f})"
    )

    return RoutingResult(
        primary_persona=primary_persona,
        confidence=primary_score,
        secondary_persona=secondary_persona,
        reasoning=reasoning
    )
```

**í…ŒìŠ¤íŠ¸**:

```python
def test_route_curious_inquiry():
    """í˜¸ê¸°ì‹¬ ìˆëŠ” ì§ˆë¬¸ ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸"""
    router = PersonaRouter()

    result = router.route("curious-flowing-inquiry")

    assert result.primary_persona in ['Elro', 'Riri']  # ê¸°ìˆ /ë¶„ì„ í˜ë¥´ì†Œë‚˜
    assert result.confidence > 0.5
    assert result.secondary_persona is not None

def test_route_frustrated_expressive():
    """ì¢Œì ˆê° í‘œí˜„ ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸"""
    router = PersonaRouter()

    result = router.route("frustrated-burst-expressive")

    assert result.primary_persona == 'Lua'  # ê°ì„± ê³µê°
    assert result.confidence >= 0.8
    assert 'ê°ì • í†¤=frustrated' in result.reasoning
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### í…ŒìŠ¤íŠ¸ íŒŒì¼ êµ¬ì¡°

**íŒŒì¼**: `tests/test_persona_router.py`

```python
"""
PersonaRouter í…ŒìŠ¤íŠ¸

Phaseë³„ í…ŒìŠ¤íŠ¸ êµ¬ì„±:
- Phase 1: í˜ë¥´ì†Œë‚˜ ì„¤ì • ë¡œë“œ (3ê°œ í…ŒìŠ¤íŠ¸)
- Phase 2: íŒŒë™í‚¤ íŒŒì‹± (3ê°œ í…ŒìŠ¤íŠ¸)
- Phase 3: ë§¤ì¹­ ì ìˆ˜ ê³„ì‚° (5ê°œ í…ŒìŠ¤íŠ¸)
- Phase 4: ë¼ìš°íŒ… ë¡œì§ (4ê°œ í…ŒìŠ¤íŠ¸)
"""

import sys
from pathlib import Path

# ë™ì  ëª¨ë“ˆ ë¡œë”© (ion-mentoring ë””ë ‰í† ë¦¬ ì²˜ë¦¬)
project_root = Path(__file__).parent.parent
sys.path.insert(0, str(project_root))

import importlib.util

# persona_router ëª¨ë“ˆ ë¡œë”©
spec = importlib.util.spec_from_file_location(
    "persona_router",
    project_root / "persona_router.py"
)
persona_router = importlib.util.module_from_spec(spec)
spec.loader.exec_module(persona_router)

PersonaRouter = persona_router.PersonaRouter
PersonaConfig = persona_router.PersonaConfig
RoutingResult = persona_router.RoutingResult


# Phase 1: í˜ë¥´ì†Œë‚˜ ì„¤ì • ë¡œë“œ
def test_persona_config_loading():
    """í˜ë¥´ì†Œë‚˜ ì„¤ì • ë¡œë“œ í…ŒìŠ¤íŠ¸"""
    # êµ¬í˜„ ì˜ˆì‹œëŠ” ìœ„ ì°¸ì¡°
    pass

# Phase 2: íŒŒë™í‚¤ íŒŒì‹±
def test_parse_resonance_key_valid():
    """ìœ íš¨í•œ íŒŒë™í‚¤ íŒŒì‹± í…ŒìŠ¤íŠ¸"""
    # êµ¬í˜„ ì˜ˆì‹œëŠ” ìœ„ ì°¸ì¡°
    pass

# Phase 3: ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°
def test_calculate_match_score_lua_frustrated():
    """Lua - frustrated íŒŒë™í‚¤ ë§¤ì¹­ í…ŒìŠ¤íŠ¸"""
    # êµ¬í˜„ ì˜ˆì‹œëŠ” ìœ„ ì°¸ì¡°
    pass

# Phase 4: ë¼ìš°íŒ… ë¡œì§
def test_route_curious_inquiry():
    """í˜¸ê¸°ì‹¬ ìˆëŠ” ì§ˆë¬¸ ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸"""
    # êµ¬í˜„ ì˜ˆì‹œëŠ” ìœ„ ì°¸ì¡°
    pass
```

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì½”ë“œ êµ¬í˜„

- [ ] `persona_router.py` ìƒì„±
- [ ] PersonaConfig ë°ì´í„°í´ë˜ìŠ¤ ì •ì˜
- [ ] RoutingResult ë°ì´í„°í´ë˜ìŠ¤ ì •ì˜
- [ ] PersonaRouter í´ë˜ìŠ¤ êµ¬í˜„
- [ ] Phase 1-4 ëª¨ë“  ë©”ì„œë“œ êµ¬í˜„

### í…ŒìŠ¤íŠ¸ ì‘ì„±

- [ ] `tests/test_persona_router.py` ìƒì„±
- [ ] Phase 1 í…ŒìŠ¤íŠ¸ 3ê°œ ì‘ì„±
- [ ] Phase 2 í…ŒìŠ¤íŠ¸ 3ê°œ ì‘ì„±
- [ ] Phase 3 í…ŒìŠ¤íŠ¸ 5ê°œ ì‘ì„±
- [ ] Phase 4 í…ŒìŠ¤íŠ¸ 4ê°œ ì‘ì„±
- [ ] ì „ì²´ 15ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼

### í’ˆì§ˆ ê²€ì¦

- [ ] ëª¨ë“  í•¨ìˆ˜ì— íƒ€ì… íŒíŠ¸
- [ ] Docstring 100% ì™„ì„±
- [ ] ë§ˆí¬ë‹¤ìš´ ë¦°íŠ¸ ì—ëŸ¬ 0ê°œ
- [ ] pytest ì‹¤í–‰ ê²°ê³¼ 100% í†µê³¼

---

## ğŸ“ í•™ìŠµ í¬ì¸íŠ¸

### ì „ëµ íŒ¨í„´ ì ìš©

**ê°œë…**: ì•Œê³ ë¦¬ì¦˜ì„ ìº¡ìŠí™”í•˜ì—¬ ëŸ°íƒ€ì„ì— ì„ íƒ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” íŒ¨í„´

**ì ìš©**:

- PersonaRouterê°€ ì—¬ëŸ¬ í˜ë¥´ì†Œë‚˜ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒ
- ê° í˜ë¥´ì†Œë‚˜ëŠ” ë…ë¦½ì ì¸ ì „ëµ (ì¶”í›„ êµ¬í˜„)
- ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¼ ì „ëµ ë³€ê²½ ê°€ëŠ¥

### ë°ì´í„° ì£¼ë„ ì„¤ê³„

**ê°œë…**: í•˜ë“œì½”ë”© ëŒ€ì‹  ë°ì´í„°ë¡œ ë™ì‘ ì •ì˜

**ì ìš©**:

- PersonaConfigë¡œ í˜ë¥´ì†Œë‚˜ íŠ¹ì„± ì •ì˜
- ë§¤í•‘ í…Œì´ë¸”ë¡œ ì ìˆ˜ ê³„ì‚° ë¡œì§ ë¶„ë¦¬
- ì¶”í›„ JSON/YAML íŒŒì¼ë¡œ ì™¸ë¶€í™” ê°€ëŠ¥

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### Day 5 ì¤€ë¹„

- [ ] PersonaRouter ì½”ë“œ ë¦¬ë·°
- [ ] ResonanceConverter ì—°ë™ ê³„íš
- [ ] ë©€í‹° í˜ë¥´ì†Œë‚˜ í˜‘ë ¥ ì„¤ê³„

---

**Day 4 í™”ì´íŒ…!** ğŸ‰

---

**ë.**
