# Lumen v1.6 â€” Enrichment Schema (P1)
version: 1
packet:
  required:
    - ts_ms
    - source
    - signal_type
    - context_band
    - entropy_score
    - tokens
  properties:
    ts_ms: { type: integer, description: "event timestamp (ms)" }
    source: { type: string, description: "origin of event (kafka topic / system)" }
    signal_type: { type: string, enum: ["metric","event","log","fact","quote"] }
    context_band: { type: string, enum: ["low","mid","high"] }
    entropy_score: { type: number, minimum: 0.0, maximum: 1.0 }
    tokens:
      type: array
      items: { type: string }
      description: "semantic tokens extracted from payload"
    meta:
      type: object
      description: "optional metadata: host, service, severity, etc"
metrics:
  semantic_density:
    formula: "len(tokens) / max(1, raw_len) * scale"
    scale: 10.0
  entropy_shift:
    formula: "|entropy_score - prev_entropy_score|"
