groups:
- name: lumen.rules
  rules:
  - alert: LumenHighLatencyP95
    expr: latency_p95_ms > 500
    for: 2m
    labels: {severity: warning, team: lumen}
    annotations:
      summary: "High latency p95 detected"
      description: "latency_p95_ms is {{ $value }} > 500 for 2m"

  - alert: LumenHighErrorRate
    expr: error_rate > 0.03
    for: 2m
    labels: {severity: critical, team: lumen}
    annotations:
      summary: "High error rate detected"
      description: "error_rate is {{ $value }} > 3% for 2m"

  - alert: LumenLowCoherence
    expr: coherence_value < 0.55
    for: 3m
    labels: {severity: warning, team: lumen}
    annotations:
      summary: "Coherence degraded"
      description: "coherence_value below 0.55"

  - alert: LumenActiveAdjustmentsStuck
    expr: feedback_active_adjustments > 0
    for: 10m
    labels: {severity: info, team: lumen}
    annotations:
      summary: "Active adjustments persisting"
      description: "feedback_active_adjustments > 0 for 10m â€” check rollback"

# Inhibit lower severity if higher one is firing for the same team
- name: lumen.inhibit
  rules: []
