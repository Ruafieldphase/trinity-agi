{
    "modes": {
        "work": {
            "description": "업무 시간 고빈도 모니터링 모드",
            "start": [
                {
                    "name": "RPA Worker",
                    "processPattern": "rpa_worker.py",
                    "script": "scripts/ensure_rpa_worker.ps1",
                    "args": [],
                    "type": "python",
                    "priority": "high"
                },
                {
                    "name": "Observer Telemetry",
                    "processPattern": "observe_desktop_telemetry.ps1",
                    "script": "scripts/observe_desktop_telemetry.ps1",
                    "args": [
                        "-IntervalSeconds",
                        "5"
                    ],
                    "type": "job",
                    "jobName": "ObserverTelemetry",
                    "priority": "medium"
                },
                {
                    "name": "Worker Monitor",
                    "processPattern": "worker_monitor_daemon.ps1",
                    "script": "scripts/start_worker_monitor_daemon.ps1",
                    "args": [
                        "-KillExisting",
                        "-IntervalSeconds",
                        "5"
                    ],
                    "type": "job",
                    "jobName": "WorkerMonitorDaemon",
                    "priority": "low"
                }
            ],
            "adjust": [
                {
                    "name": "Flow Observer",
                    "processPattern": "FlowObserverDaemon",
                    "script": "scripts/ensure_music_flow_daemons.ps1",
                    "args": [],
                    "type": "job",
                    "jobName": "FlowObserverDaemon",
                    "targetInterval": 300,
                    "priority": "medium"
                },
                {
                    "name": "Music Daemon",
                    "processPattern": "music_daemon.py",
                    "script": "scripts/ensure_music_flow_daemons.ps1",
                    "args": [],
                    "type": "python",
                    "targetInterval": 60,
                    "priority": "medium"
                }
            ],
            "stop": []
        },
        "rest": {
            "description": "휴식 시간 저부하 모드",
            "start": [],
            "adjust": [
                {
                    "name": "Flow Observer",
                    "processPattern": "FlowObserverDaemon",
                    "script": "scripts/ensure_music_flow_daemons.ps1",
                    "args": [],
                    "type": "job",
                    "jobName": "FlowObserverDaemon",
                    "targetInterval": 900,
                    "priority": "low"
                },
                {
                    "name": "Music Daemon",
                    "processPattern": "music_daemon.py",
                    "script": "scripts/ensure_music_flow_daemons.ps1",
                    "args": [],
                    "type": "python",
                    "targetInterval": 300,
                    "priority": "low"
                }
            ],
            "stop": [
                {
                    "name": "RPA Worker",
                    "processPattern": "rpa_worker.py",
                    "type": "python",
                    "priority": "high"
                },
                {
                    "name": "Observer Telemetry",
                    "processPattern": "observe_desktop_telemetry.ps1",
                    "type": "job",
                    "jobName": "ObserverTelemetry",
                    "priority": "medium"
                },
                {
                    "name": "Worker Monitor",
                    "processPattern": "worker_monitor_daemon.ps1",
                    "type": "job",
                    "jobName": "WorkerMonitorDaemon",
                    "priority": "low"
                }
            ]
        }
    },
    "core": {
        "description": "항상 유지되어야 하는 필수 프로세스 (절대 중지하지 않음)",
        "processes": [
            {
                "name": "Task Queue Server",
                "processPattern": "task_queue_server.py",
                "port": 8091
            },
            {
                "name": "Watchdog",
                "processPattern": "task_watchdog.py"
            },
            {
                "name": "Original Data API",
                "processPattern": "original_data_server.py",
                "port": 8093
            },
            {
                "name": "Observer Server",
                "processPattern": "observer_server",
                "port": 8095
            }
        ]
    },
    "auto": {
        "description": "시간/리듬 파일/부하에 따라 자동 모드 전환",
        "schedule": {
            "workHours": {
                "start": "09:00",
                "end": "18:00"
            }
        },
        "rhythmFile": {
            "pattern": "outputs/RHYTHM_REST_PHASE_*.md",
            "ifExists": "rest",
            "ifNotExists": "checkSchedule"
        },
        "loadThreshold": {
            "cpuPercent": 50,
            "aboveThreshold": "work",
            "belowThreshold": "rest"
        }
    },
    "safety": {
        "dryRunDefault": true,
        "timeoutSeconds": 30,
        "skipIfAlreadyRunning": true,
        "logPath": "outputs/rhythm_mode_changes.jsonl"
    }
}