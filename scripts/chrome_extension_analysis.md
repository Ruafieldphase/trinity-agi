# 🔌 크롬 익스텐션으로 Comet 워커 강화하기

## 현재 시스템 vs 크롬 익스텐션

### 현재 (HTML 페이지 기반)

✅ **장점:**

- 즉시 실행 가능
- 개발/디버깅 쉬움
- 브라우저 탭에서 시각적 모니터링

⚠️ **제약:**

- 탭을 닫으면 중지됨
- 브라우저 재시작 시 수동 재실행 필요
- 5초마다 폴링 (리소스 소모)

### 크롬 익스텐션 버전

✨ **추가 이점:**

1. **백그라운드 실행** 🌙
   - Service Worker로 브라우저 시작 시 자동 실행
   - 탭 없이도 동작 (백그라운드)
   - 브라우저 재시작해도 자동 재개

2. **더 강력한 API** 🔧
   - `chrome.alarms` - 정기 작업 스케줄링
   - `chrome.storage` - 영구 상태 저장 (워커 통계)
   - `chrome.notifications` - 데스크톱 알림
   - `chrome.runtime.sendMessage` - Copilot과 실시간 통신

3. **파일 시스템 접근** 📁
   - Native Messaging으로 로컬 파일 직접 접근
   - Python 프로세스와 양방향 통신
   - 더 빠른 작업 감지 (폴링 불필요)

4. **멀티 워커 관리** 👥
   - 여러 작업 타입별로 독립 워커 실행
   - 우선순위 큐 구현 가능
   - 부하 분산 및 병렬 처리

## 구현 아키텍처

```
┌─────────────────────────────────────────────┐
│  Chrome Extension (Manifest V3)             │
├─────────────────────────────────────────────┤
│                                             │
│  [Background Service Worker]                │
│  - 브라우저 시작 시 자동 실행               │
│  - API 폴링 (chrome.alarms 사용)           │
│  - 작업 처리 orchestration                  │
│                                             │
│  [Content Scripts] (선택사항)               │
│  - 웹 스크래핑 작업 시 주입                 │
│  - 실제 DOM 접근 및 데이터 추출             │
│                                             │
│  [Popup UI]                                 │
│  - 현재 HTML 페이지와 유사                  │
│  - 통계 및 제어 패널                        │
│                                             │
│  [Native Messaging Host] (고급)            │
│  - Python 프로세스와 직접 통신              │
│  - 파일 시스템 실시간 모니터링              │
│                                             │
└─────────────────────────────────────────────┘
           ↕ HTTP API (localhost:8091)
┌─────────────────────────────────────────────┐
│  Flask API Server                           │
│  - 작업 큐 관리                             │
│  - 결과 수집                                │
└─────────────────────────────────────────────┘
           ↕ File I/O
┌─────────────────────────────────────────────┐
│  Task Queue (JSON Files)                    │
│  - tasks/                                   │
│  - results/                                 │
│  - inbox/                                   │
└─────────────────────────────────────────────┘
```

## 개발 계획

### Phase 1: 기본 익스텐션 (1-2시간)

- manifest.json 작성
- background.js - 현재 worker 로직 이식
- popup.html - 현재 HTML UI 재사용
- 패키징 및 로드

### Phase 2: 백그라운드 자동화 (30분)

- chrome.alarms API로 정기 폴링
- chrome.storage로 통계 영구 저장
- 브라우저 시작 시 자동 실행

### Phase 3: 고급 기능 (선택)

- Native Messaging Host 구현
- 파일 시스템 실시간 감지
- 데스크톱 알림
- 멀티 워커 병렬 처리

## 즉시 테스트 가능

현재 HTML 버전도 완벽히 작동합니다!
익스텐션은 "더 나은 UX"를 위한 선택사항입니다.

### 지금 바로 협업 테스트

1. 작업 3개 전송 (이미 준비됨)
2. Comet이 자동 처리
3. 결과 확인

원하시면 지금 테스트 작업을 보내드릴까요? 🚀
