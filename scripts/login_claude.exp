#!/usr/bin/expect

set timeout 20
spawn bash -c "export PATH=~/.npm-global/bin:\$PATH && claude login"

# Handle Theme Selection
expect {
    "Dark mode" { send "\r"; exp_continue }
    "Light mode" { send "\r"; exp_continue }
    "Select a theme" { send "\r"; exp_continue }
    "https://anthropic.com/login" { 
        puts "\n\nFOUND_URL: $expect_out(0,string)\n"
        exit 0
    }
    timeout { puts "TIMEOUT waiting for prompt"; exit 1 }
}

# Handle other prompts if any
expect {
    "https://anthropic.com/login" { 
        puts "\n\nFOUND_URL: $expect_out(0,string)\n"
        exit 0
    }
    timeout { puts "TIMEOUT waiting for URL"; exit 1 }
}

